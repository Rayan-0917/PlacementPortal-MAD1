{% extends "layout.html" %}
{% block content %}

<h3>Welcome, Admin</h3>

<div class="row mt-4 mb-5">
    <div class="col-md-6">
        <div class="card border-warning h-100">
            <div class="card-header bg-warning text-danger fw-bold">Pending Company Approvals</div>
            <ul class="list-group list-group-flush">
                {% for company in pending_companies %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{company.company_name}}
                    <a href="/admin/approve_company/{{company.id}}" class="btn btn-xs btn-success py-0">Approve</a>
                </li>
                {% else %}
                <li class="list-group-item text-muted small">No pending companies.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card border-warning h-100">
            <div class="card-header bg-warning text-danger fw-bold">Pending Drive Approvals</div>
            <ul class="list-group list-group-flush">
                {% for drive in pending_drives %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{drive.drive_name}}<small>{{drive.company_name}}</small>
                    <a href="/admin/approve_drive/{{drive.id}}" class="btn btn-xs btn-success py-0">Approve</a>
                </li>
                {% else %}
                <li class="list-group-item text-muted small">No pending drives.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<hr>

<h4>All Students</h4>

<div class="card shadow-sm mb-4">
    <table class="table table-striped mb-0">
        <thead class="table-primary">
            <tr>
                <th>Name</th>
                <th>Department</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for student in all_students %}
            <tr>
                <td>{{student.student_name}}</td>
                <td>{{student.department}}</td>
                <td>
                    <span class="badge {{'bg-danger' if student.is_blacklisted else 'bg-success'}}">
                        {{'Blacklisted' if student.is_blacklisted else 'Active'}}
                    </span>
                </td>
                <td><a href="/admin/blacklist/{{student.user_id}}" class="btn btn-xs p-0 text-danger">Blacklist</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<hr>

<h4>All Companies</h4>

<div class="card shadow-sm mb-4">
    <table class="table table-striped mb-0">
        <thead class="table-primary">
            <tr>
                <th>Company Name</th>
                <th>Website</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for company in all_companies %}
            <tr>
                <td>{{company.company_name}}</td>
                <td>
                    {% if company.website %}
                    <a href="{{ company.website if 'http' in company.website else 'https://' + company.website }}"
                        target="_blank" class="text-decoration-none">
                        Visit Site â†—
                    </a>
                    {% else %}
                    <span class="text-muted small">Not Provided</span>
                    {% endif %}
                </td>
                <td>
                    <span class="badge {{'bg-danger' if company.is_blacklisted else 'bg-success'}}">
                        {{'Blacklisted' if company.is_blacklisted else 'Active'}}
                    </span>
                </td>
                <td><a href="/admin/blacklist/{{company.user_id}}" class="btn btn-xs p-0 text-danger">Blacklist</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<hr>

<h4>All Drives</h4>

<div class="card shadow-sm mb-4">
    <table class="table table-striped mb-0">
        <thead class="table-primary">
            <tr>
                <th>Drive Name</th>
                <th>Company</th>
                <th>Job Title</th>
                <th>Deadline</th>
            </tr>
        </thead>
        <tbody>
            {% for drive in all_drives %}
            <tr>
                <td>{{drive.drive_name}}</td>
                <td>{{drive.company_name}}</td>
                <td>{{drive.job_title}}</td>
                <td>{{drive.deadline}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}